class Solution {
    public String shiftingLetters(String s, int[][] shifts) {
        int n = s.length();
        int[] arr = new int[n];
        Arrays.fill(arr, 0);
        for(int[] q:shifts){
            int st = q[0];
            int end = q[1];
            int tmp = q[2];
            int x;
            if(tmp == 0) x = -1;
            else x = 1;
            arr[st] += x;
            if(end<n-1) arr[end+1] -=x;
        }
        for(int i=0; i<n; i++){
            arr[i] = arr[i] % 26;
            if(arr[i]<0) arr[i]+=26;
        }
        for(int i=1; i<n; i++) arr[i] = arr[i] + arr[i-1];
        //System.out.println(Arrays.toString(arr));
        return solve(arr, s, n);
    }

    String solve(int[] arr, String s, int n){
        StringBuilder str = new StringBuilder();
        char[] ch = s.toCharArray();
        for(int i=0; i<n; i++){
            ch[i] = (char)( ( ((ch[i]-'a') + arr[i]) % 26) + 'a' );
        }
        for(char c:ch) str.append(c);
        return str.toString();
    }
    
}
